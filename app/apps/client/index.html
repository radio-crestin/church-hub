<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <meta name="HandheldFriendly" content="true" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5" />
    <meta name="msapplication-TileColor" content="#6366f1" />
    <meta name="theme-color" content="#030712" media="(prefers-color-scheme: dark)" />
    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)" />
    <title>Church Hub</title>
    <script>
      // Set theme immediately to avoid flash
      const theme = localStorage.getItem('church-hub-theme') || 'dark';
      document.documentElement.classList.add(theme);
    </script>
  </head>
  <body>
    <div id="loading-screen" style="
      position: fixed;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: #030712;
      color: #f9fafb;
      font-family: system-ui, -apple-system, sans-serif;
      z-index: 9999;
    ">
      <div id="loading-content" style="display: flex; flex-direction: column; align-items: center; gap: 24px;">
        <img src="/logo.svg" alt="Church Hub" style="width: 80px; height: 80px;" onerror="this.style.display='none'" />
        <h1 style="margin: 0; font-size: 24px; font-weight: 600;">Church Hub</h1>
        <div style="display: flex; align-items: center; gap: 8px;">
          <div style="
            width: 20px;
            height: 20px;
            border: 2px solid #4f46e5;
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
          "></div>
          <span id="loading-status" style="color: #9ca3af; font-size: 14px;">Starting server...</span>
        </div>
        <div id="loading-logs" style="
          margin-top: 16px;
          padding: 16px;
          background: #111827;
          border-radius: 8px;
          font-family: monospace;
          font-size: 12px;
          color: #9ca3af;
          max-width: 400px;
          max-height: 200px;
          overflow-y: auto;
          white-space: pre-wrap;
          word-break: break-all;
        "></div>
      </div>
      <style>
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      </style>
    </div>
    <script>
      // For screen routes, show only black/transparent background - no loading content
      if (window.location.pathname.startsWith('/screen/')) {
        var loadingContent = document.getElementById('loading-content');
        var loadingScreen = document.getElementById('loading-screen');
        if (loadingContent) loadingContent.style.display = 'none';
        if (loadingScreen) loadingScreen.style.background = 'black';
      }
    </script>
    <div id="app"></div>
    <div id="portal"></div>
    <script type="module" src="/src/router.tsx"></script>
  </body>
</html>